<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="style.css">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>comment</title>
</head>

<body>
    <div class="container">
        <h1>Comment</h1>
        <p>Đánh giá của thực khách</p>
        <div><span id="comment">0</span> Bình luận</div>
        <div class="comments">
            <div class="parents">
                <img src="img/guest.png">
                <div>
                    <h1> Thực khách</h1>
                    <div> <span class="date">00:00:00 1/12/2023</span> </div>
                    <h2>Món: Canh Khổ Qua</h2>
                    <p>Đánh giá: 3 sao</p>
                    <p>Bình luận: Tạm</p>
                </div>
            </div>
            <div class="parents">
                <img src="img/user.png">
                <div>
                    <h1> Khang &nbsp;&nbsp;</h1>
                    <div> <span class="date">23:59:59 24/12/2023</span> </div>
                    <h2>Món: Trà sữa</h2>
                    <p>Đánh giá: 5 sao</p>
                    <p>Bình luận: Nice :))</p>
                </div>
            </div>
        </div>
        <div class="head">
            <h1>Viết Bình Luận</h1>
        </div>
        <div class="commentbox">
            <img src="img/guest.png">
            <div class="content">
                <h3>Bình luận với tên: </h3>
                <input type="text" value="Thực khách" class="user">

                <div class="commentinput">
                    <div class="form_group">
                        <p>Chọn món ăn bạn muốn bình luận:</p>
                        <select id="item" class="form_control">
                            <option value="Cafe đá hay Cafe đen">Cafe đá hay Cafe đen</option>
                            <option value="Trà sữa">Trà sữa</option>
                            <option value="Trà hay Chè">Trà hay Chè</option>
                            <option value="Bánh Mì">Bánh Mì</option>
                            <option value="Phở">Phở</option>
                            <option value="Bún Bò Huế">Bún Bò Huế</option>
                            <option value="Bánh Xèo">Bánh Xèo</option>
                            <option value="Canh Khổ Qua">Canh Khổ Qua</option>
                            <option value="Thịt Kho Trứng">Thịt Kho Trứng</option>
                        </select>
                    </div>
                    <div class="card">
                        <p class="heading">Đánh giá :</p>
                        <div class="stars">
                            <i class="bx bx-star">
                                <div></div>
                                <div></div>
                            </i>
                            <i class="bx bx-star">
                                <div></div>
                                <div></div>
                            </i>
                            <i class="bx bx-star">
                                <div></div>
                                <div></div>
                            </i>
                            <i class="bx bx-star">
                                <div></div>
                                <div></div>
                            </i>
                            <i class="bx bx-star">
                                <div></div>
                                <div></div>
                            </i>
                        </div>
                        <p class="rating"><span>0</span> sao</p>
                    </div>
                    <input type="text" placeholder="Ý kiến của bạn" class="usercomment">
                    <div class="buttons">
                        <button type="submit" disabled id="publish">Gửi Bình Luận</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.onload = function () {
            date1 = new date(2023 - 12 - 25);
            date2 = new date(2023 - 12 - 31);
            comments.innerHTML +=
                `<div class="parents">
        <img src="img/guest.png">
        <div>
            <h1> Thực khách &nbsp;&nbsp;</h1>
            <div> <span class="date">${date1} </span> </div>
            <h2>Món: Canh Khổ Qua &nbsp;&nbsp;<h2>
            <p>Đánh giá: 3 sao</p>
            <p>Bình luận: Hơi đắng</p>
        </div>
    </div>`;
            comments.innerHTML +=
                `<div class="parents">
        <img src="img/user.png">
        <div>
            <h1> Khang &nbsp;&nbsp;</h1>
            <div> <span class="date">${date2} </span> </div>
            <h2>Món: Trà sữa &nbsp;&nbsp;<h2>
            <p>Đánh giá: 5 sao</p>
            <p>Bình luận: Nice :))</p>
        </div>
    </div>`;
        }

        const clickAreas = document.querySelectorAll(".stars div");
        const stars = document.querySelectorAll(".stars i");

        clickAreas.forEach((area, i) => {
            area.addEventListener("click", () => {
                stars.forEach((star) => (star.className = "bx bx-star"));
                const starCount = (i + 1) / 2;

                for (let j = 0; j < starCount; j++) {
                    if (starCount - j === 0.5 && j === starCount - 0.5) {
                        stars[j].className = "bx bxs-star-half";
                    } else {
                        stars[j].className = "bx bxs-star";
                    }
                }

                document.querySelector(".rating span").textContent = starCount;
            });
        });

        document.getElementById("comment").textContent = 2;

        "use strict";
        const userId = {
            name: null,
            identity: null,
            image: null,
            message: null,
            date: null
        }
        const userComment = document.querySelector(".usercomment");
        const publishBtn = document.querySelector("#publish");
        const comments = document.querySelector(".comments");
        const userName = document.querySelector(".user");
        const item = document.getElementById("item");
        const star = document.querySelector(".rating span");
        userComment.addEventListener("input", e => {
            if (!userComment.value) {
                publishBtn.setAttribute("disabled", "disabled");
                publishBtn.classList.remove("abled");
            } else {
                publishBtn.removeAttribute("disabled");
                publishBtn.classList.add("abled");
            }
        })


        function addPost() {
            if (!userComment.value) return;
            userId.name = userName.value;
            if (userId.name === "Thực khách") {
                userId.identity = false;
                userId.image = "img/guest.png";
            } else {
                userId.identity = true;
                userId.image = "img/user.png"
            }

            userId.message = userComment.value;
            userId.date = new Date().toLocaleString();
            let published =
                `<div class="parents">
            <img src="${userId.image}">
            
            <div>
                <h1> ${userId.name}&nbsp;&nbsp;</h1>
                <div> <span class="date">${userId.date}</span> </div>
                <h2>Món: ${item.value}&nbsp;&nbsp;</h2>
                <p>Đánh giá: ${star.textContent} sao</p>
                <p>Bình luận: ${userId.message}</p>
            </div>
        </div>`;

            comments.innerHTML += published;
            userComment.value = "";

            let commentNum = document.querySelectorAll(".parents").length;
            document.getElementById("comment").textContent = commentNum;
        }

        publishBtn.addEventListener("click", addPost)
    </script>
</body>

</html>